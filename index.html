<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ideal | AI Perfume Search</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Pretendard:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        body {
            margin: 0; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding-top: 10vh;
            /* ë°°ê²½ ì´ë¯¸ì§€ ì„¤ì •: íŒŒì¼ëª…ì´ ì •í™•í•´ì•¼ í•©ë‹ˆë‹¤ */
            background-image: linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.3)), url('Gemini_Generated_Image_yyx2ecyyx2ecyyx2.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Pretendard', sans-serif; 
            min-height: 100vh;
        }
        .top-right-container { position: absolute; top: 20px; right: 20px; z-index: 1000; display: flex; align-items: center; gap: 10px; }
        #user-info { display: none; background: rgba(255, 255, 255, 0.9); padding: 8px 15px; border-radius: 30px; font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .logo { font-family: 'Dancing Script', cursive; font-size: clamp(50px, 15vw, 90px); font-weight: 700; color: #000; margin-bottom: 25px; text-align: center; cursor: pointer; text-shadow: 2px 2px 4px rgba(255,255,255,0.5); }
        .sub-header { color: rgba(0, 0, 0, 0.7); font-size: 14px; margin-bottom: 10px; text-align: center; font-weight: bold; }
        .search-wrapper { width: 90%; max-width: 580px; position: relative; }
        .search-box { display: flex; align-items: center; background: rgba(255, 255, 255, 0.9); border-radius: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .search-input { width: 100%; padding: 15px 25px; font-size: 16px; border: 1px solid #ffccd5; border-radius: 30px; outline: none; background: transparent; }
        #result-area { width: 100%; margin-top: 20px; padding: 25px; border-radius: 20px; background: rgba(255, 255, 255, 0.95); display: none; line-height: 1.8; border: 1px solid #ffccd5; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    </style>
</head>
<body>

    <div class="top-right-container">
        <div id="g_id_onload" 
             data-client_id="4623512319-0hrosa9j6l01rcgmi2aep1vd768f3o1u.apps.googleusercontent.com" 
             data-callback="handleCredentialResponse">
        </div>
        <div class="g_id_signin" data-type="standard"></div>
        <div id="user-info"><span id="user-name"></span></div>
    </div>

    <div class="sub-header">ë‚˜ë³´ë‹¤ ë‚˜ë¥¼ ë” ì˜ ì•„ëŠ” AIê°€ ì¶”ì²œí•´ì£¼ëŠ” ì´ìƒì ì¸ í–¥ìˆ˜</div>
    <div class="logo" onclick="location.reload()">ideal</div>

    <div class="search-wrapper">
        <div class="search-box">
            <input type="text" id="userInput" class="search-input" placeholder="ë„ˆì˜ ë¶„ìœ„ê¸°ë¥¼ í•œ ë‹¨ì–´ë¡œ ë§í•´ë´ (ì˜ˆ: ì‹œí¬í•œ, ë”°ëœ»í•œ)" onkeypress="if(event.key==='Enter') askGemini()">
        </div>
        <div id="result-area"><div id="ai-content"></div></div>
    </div>

    <script>
        // âš ï¸ ì¤‘ìš”: ë°œê¸‰ë°›ì€ API í‚¤ë¥¼ ì—¬ê¸°ì— ë°˜ë“œì‹œ ë„£ìœ¼ì„¸ìš”!
        const GEMINI_API_KEY = "AIzaSyBlcMHfU9l_JMpiIjEU5lAyvU-A93YKy8Y"; 

        async function askGemini() {
            const input = document.getElementById('userInput').value;
            const aiContent = document.getElementById('ai-content');
            const resultArea = document.getElementById('result-area');
            
            if(!input) return;

            resultArea.style.display = "block";
            aiContent.innerHTML = "<b>ë¶„ì„ ì¤‘ì´ì•¼... âœ¨</b>";

            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`;

            try {
                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `ë„ˆëŠ” í–¥ìˆ˜ ì „ë¬¸ê°€ì•¼. '${input}' ë¶„ìœ„ê¸°ì— ë§ëŠ” í–¥ìˆ˜ë¥¼ ë¸Œëœë“œëª…ê³¼ ì œí’ˆëª…ì„ í¬í•¨í•´ì„œ í•˜ë‚˜ë§Œ ë°˜ë§ë¡œ ì¶”ì²œí•´ì£¼ê³  ê·¸ ì´ìœ ë¥¼ ì§§ê²Œ ì„¤ëª…í•´ì¤˜.` }] }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    aiContent.innerHTML = "API í‚¤ë¥¼ í™•ì¸í•´ì¤˜! ì—ëŸ¬: " + data.error.message;
                    return;
                }

                const result = data.candidates[0].content.parts[0].text;
                aiContent.innerHTML = `<div style="font-weight:bold; color:#ff85a1; margin-bottom:10px;">ğŸŒ¸ ${input} ë¶„ìœ„ê¸°ì— ì–´ìš¸ë¦¬ëŠ” ì¶”ì²œ</div>${result}`;
            } catch (e) {
                aiContent.innerHTML = "ì—°ê²°ì— ë¬¸ì œê°€ ìƒê²¼ì–´. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì¤˜! ğŸ˜¢";
            }
        }

        function handleCredentialResponse(r) {
            const p = parseJwt(r.credential);
            document.getElementById('user-name').innerText = p.name + "ë‹˜, ë°˜ê°€ì›Œ! ğŸ‘‹";
            document.getElementById('user-info').style.display = 'block';
            document.querySelector('.g_id_signin').style.display = 'none';
        }

        function parseJwt(t){var r=t.split(".")[1],n=r.replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(n).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}
    </script>
</body>
</html>